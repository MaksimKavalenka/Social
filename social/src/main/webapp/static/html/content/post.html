<div ng-repeat="post in ctrl.posts">
	<div class="content ct-content" ng-controller="PostEditController as postCtrl">
		<div class="justify">
			<a class="link-topic" ng-if="!post.parentPost" ui-sref="topic({path: post.topic.path})">{{post.topic.name}}</a>
			<div class="align-right">
				<div class="dropdown">
					<div class="drp-button"></div>
					<div class="drp-menu">
						<a class="drp-option" ng-if="!post.parentPost && !ctrl.postPage" ui-sref="post({path: post.topic.path, id: post.id})">Post page</a>
						<div ng-if="user.id === post.creator.id">
							<hr class="hr-dropdown" ng-if="!post.parentPost && !ctrl.postPage">
							<div class="drp-option" ng-click="postCtrl.editionForm(post)">Edit</div>
						</div>
					</div>
				</div>
				<div>Created by {{post.creator.login}}</div>
				<div>{{post.date | date: 'dd.MM.yyyy (HH:mm:ss)'}}</div>
			</div>
		</div>
		<hr class="hr-common">
		<div class="post" ng-if="!postCtrl.form">{{post.text}}</div>
		<form method="POST" ng-if="postCtrl.form" name="form" novalidate>
			<div class="align-right">
				<img class="img-load" ng-if="postCtrl.dataLoading"/>
				<div class="action action-save" ng-click="postCtrl.updatePost(post.id)" ng-disabled="form.$invalid || postCtrl.dataLoading"></div>
				<div class="action action-cancel" ng-click="postCtrl.hideForm()"></div>
			</div>
			<textarea class="area-post" id="text" name="text" ng-model="postCtrl.post.text" required></textarea>
		</form>
	</div>
	<div ng-if="$first && ctrl.postPage">
		<form method="POST" ng-controller="PostEditController as postCtrl" name="form" novalidate>
			<div class="align-right">
				<img class="img-load" ng-if="postCtrl.dataLoading"/>
				<div class="action action-save" ng-click="postCtrl.createPost(post.id)" ng-disabled="form.$invalid || postCtrl.dataLoading"></div>
			</div>
			<textarea class="area-comment" id="text" name="text" ng-model="postCtrl.post.text" required></textarea>
		</form>
		<div class="comments-title">
			Comments
			<hr class="hr-comments">
		</div>
	</div>
</div>